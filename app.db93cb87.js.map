{"mappings":"A,I,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,E,Q,C,I,E,E,S,E,E,S,E,E,SCcA,SAAS,EAAa,CAAO,CAAE,CAAM,EACjC,IAAM,EAAe,KAAK,GAAG,CAAC,EAAG,KAAK,GAAG,CAAC,EAAG,GAC7C,CAAA,EAAQ,SAAS,CAAG,GACpB,IAAI,IAAI,EAAE,EAAE,EAAE,EAAE,IAAI,CAChB,IAAM,EAAI,SAAS,aAAa,CAAC,IACjC,CAAA,EAAE,WAAW,CAAG,EAAE,EAAa,IAAI,IACnC,EAAQ,WAAW,CAAC,EACxB,CAEJ,CAnBA,AAAA,CAAA,EAAA,EAAA,IAAG,AAAH,EAAK,kBAAkB,CAAC,AAAA,IACf,GACD,CAAA,OAAO,QAAQ,CAAG,GADtB,CAEJ,GAGA,AADmB,SAAS,cAAc,CAAC,cAChC,gBAAgB,CAAC,QAAS,AAAA,IACjC,AAAA,CAAA,EAAA,EAAA,OAAM,AAAN,EAAQ,EAAA,IAAG,CACf,GAaA,MAAM,EAAe,SAAS,cAAc,CAAC,gBACvC,EAAgB,SAAS,cAAc,CAAC,iBACxC,EAAkB,SAAS,cAAc,CAAC,mBAC1C,EAAgB,SAAS,cAAc,CAAC,iBACxC,EAAa,SAAS,cAAc,CAAC,cACrC,EAAe,SAAS,cAAc,CAAC,gBACvC,EAAW,SAAS,cAAc,CAAC,YACzC,AAAA,CAAA,EAAA,EAAA,MAAK,AAAL,EAAO,AAAA,CAAA,EAAA,EAAA,GAAE,AAAF,EAAI,EAAA,EAAC,CAAG,SAAU,WACpB,IAAI,CAAC,AAAA,IACF,IAAM,EAAS,EAAS,GAAG,CAAC,UAE5B,IAAK,IAAI,KADT,QAAQ,GAAG,CAAC,GACM,GAAQ,CACtB,IAAM,EAAS,SAAS,aAAa,CAAC,SACtC,CAAA,EAAO,KAAK,CAAG,EACf,EAAO,KAAK,CAAG,EACf,EAAc,WAAW,CAAC,EAC9B,CACJ,GACC,KAAK,CAAC,AAAA,GAAO,QAAQ,GAAG,CAAC,IAE9B,EAAa,EAAY,SAAS,EAAa,KAAK,GACpD,EAAa,gBAAgB,CAAC,QAAS,WACnC,EAAa,EAAY,SAAS,IAAI,CAAC,KAAK,EAChD,GACA,EAAa,gBAAgB,CAAC,SAAU,SAAU,CAAK,EACnD,EAAM,cAAc,GACpB,EAAc,iBAAiB,CAAC,IAChC,EAAgB,iBAAiB,CAAC,IAClC,EAAc,iBAAiB,CAAC,IAChC,IAAM,EAAS,CAAC,EAgBhB,GAdoB,IAAhB,AADS,EAAc,KAAK,CAAC,IAAI,GAC5B,MAAM,EACX,CAAA,EAAO,aAAa,CAAG,CAAC,QAAQ,AAAA,EAGd,IAAlB,AADW,EAAgB,KAAK,CAAC,IAAI,GAC9B,MAAM,EACb,CAAA,EAAO,eAAe,CAAG,CAAC,QAAQ,AAAA,EAGhB,IAAlB,AADW,EAAc,eAAe,CACjC,MAAM,EACb,CAAA,EAAO,aAAa,CAAG,CAAC,QAAQ,AAAA,EAErB,SAAS,EAAa,KAAK,EAC9B,EAAS,KAAK,CAAC,IAAI,GAE3B,AAA+B,IAA/B,OAAO,IAAI,CAAC,GAAQ,MAAM,CAAQ,CAC9B,EAAO,aAAa,EACpB,EAAc,iBAAiB,CAAC,wBAChC,EAAO,eAAe,EACtB,EAAgB,iBAAiB,CAAC,0BAClC,EAAO,aAAa,EACpB,EAAc,iBAAiB,CAAC,kCACpC,MACJ,CAGJ","sources":["<anon>","src/js/app.js"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire94c2\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire94c2\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $6AR8M = parcelRequire(\"6AR8M\");\n\nvar $cOa8X = parcelRequire(\"cOa8X\");\n\nvar $ilpIi = parcelRequire(\"ilpIi\");\n(0, $cOa8X.auth).onAuthStateChanged((user)=>{\n    if (!user) window.location = \"/\";\n});\nconst $388b617130f03bd4$var$btn_logout = document.getElementById('btn_logout');\n$388b617130f03bd4$var$btn_logout.addEventListener('click', (event)=>{\n    (0, $6AR8M.signOut)((0, $cOa8X.auth));\n});\nfunction $388b617130f03bd4$var$formatRating(element, rating) {\n    const parsedRating = Math.min(5, Math.max(0, rating));\n    element.innerHTML = \"\";\n    for(let i = 0; i < 5; i++){\n        const p = document.createElement('p');\n        p.textContent = i < parsedRating ? \"\\u2605\" : \"\\u2606\";\n        element.appendChild(p);\n    }\n// return \"★\".repeat(parsedRating)+\"☆\".repeat(5-parsedRating)\n}\nconst $388b617130f03bd4$var$form_addbook = document.getElementById('form_addbook');\nconst $388b617130f03bd4$var$text_bookname = document.getElementById('text_bookname');\nconst $388b617130f03bd4$var$text_bookauthor = document.getElementById('text_bookauthor');\nconst $388b617130f03bd4$var$select_genres = document.getElementById('select_genres');\nconst $388b617130f03bd4$var$div_rating = document.getElementById('div_rating');\nconst $388b617130f03bd4$var$range_rating = document.getElementById('range_rating');\nconst $388b617130f03bd4$var$text_url = document.getElementById('text_url');\n(0, $ilpIi.getDoc)((0, $ilpIi.doc)((0, $cOa8X.db), 'static', 'genres')).then((snapshot)=>{\n    const genres = snapshot.get('genres');\n    console.log(genres);\n    for (let genre of genres){\n        const option = document.createElement('option');\n        option.value = genre;\n        option.label = genre;\n        $388b617130f03bd4$var$select_genres.appendChild(option);\n    }\n}).catch((err)=>console.log(err));\n$388b617130f03bd4$var$formatRating($388b617130f03bd4$var$div_rating, parseInt($388b617130f03bd4$var$range_rating.value));\n$388b617130f03bd4$var$range_rating.addEventListener('input', function() {\n    $388b617130f03bd4$var$formatRating($388b617130f03bd4$var$div_rating, parseInt(this.value));\n});\n$388b617130f03bd4$var$form_addbook.addEventListener('submit', function(event) {\n    event.preventDefault();\n    $388b617130f03bd4$var$text_bookname.setCustomValidity('');\n    $388b617130f03bd4$var$text_bookauthor.setCustomValidity('');\n    $388b617130f03bd4$var$select_genres.setCustomValidity('');\n    const errors = {};\n    const name = $388b617130f03bd4$var$text_bookname.value.trim();\n    if (name.length === 0) errors.text_bookname = [\n        'empty'\n    ];\n    const author = $388b617130f03bd4$var$text_bookauthor.value.trim();\n    if (author.length === 0) errors.text_bookauthor = [\n        'empty'\n    ];\n    const genres = $388b617130f03bd4$var$select_genres.selectedOptions;\n    if (genres.length === 0) errors.select_genres = [\n        'empty'\n    ];\n    const rating = parseInt($388b617130f03bd4$var$range_rating.value);\n    const url = $388b617130f03bd4$var$text_url.value.trim();\n    if (Object.keys(errors).length !== 0) {\n        if (errors.text_bookname) $388b617130f03bd4$var$text_bookname.setCustomValidity('Name cannot be empty');\n        if (errors.text_bookauthor) $388b617130f03bd4$var$text_bookauthor.setCustomValidity('Author cannot be empty');\n        if (errors.select_genres) $388b617130f03bd4$var$select_genres.setCustomValidity('Must select at least one genre');\n        return;\n    }\n});\nconst $388b617130f03bd4$var$book = {\n    name: '',\n    author: '',\n    genres: [\n        ''\n    ],\n    rating: 10,\n    url: ''\n};\n\n\n//# sourceMappingURL=app.db93cb87.js.map\n","import { signOut } from \"firebase/auth\"\nimport { auth, db } from \"./firebase\"\nimport { doc, getDoc } from \"firebase/firestore\"\n\nauth.onAuthStateChanged(user => {\n    if (!user)\n        window.location = \"/\"\n})\n\nconst btn_logout = document.getElementById('btn_logout')\nbtn_logout.addEventListener('click', event => {\n    signOut(auth)\n})\n\nfunction formatRating(element, rating) {\n    const parsedRating = Math.min(5, Math.max(0, rating))\n    element.innerHTML = \"\"\n    for(let i=0;i<5;i++){\n        const p = document.createElement('p')\n        p.textContent = i<parsedRating?\"★\":\"☆\"\n        element.appendChild(p)\n    }\n    // return \"★\".repeat(parsedRating)+\"☆\".repeat(5-parsedRating)\n}\n\nconst form_addbook = document.getElementById('form_addbook')\nconst text_bookname = document.getElementById('text_bookname')\nconst text_bookauthor = document.getElementById('text_bookauthor')\nconst select_genres = document.getElementById('select_genres')\nconst div_rating = document.getElementById('div_rating')\nconst range_rating = document.getElementById('range_rating')\nconst text_url = document.getElementById('text_url')\ngetDoc(doc(db, 'static', 'genres'))\n    .then(snapshot => {\n        const genres = snapshot.get('genres')\n        console.log(genres)\n        for (let genre of genres) {\n            const option = document.createElement('option')\n            option.value = genre\n            option.label = genre\n            select_genres.appendChild(option)\n        }\n    })\n    .catch(err => console.log(err))\n    \nformatRating(div_rating, parseInt(range_rating.value))\nrange_rating.addEventListener('input', function(){\n    formatRating(div_rating, parseInt(this.value))\n})\nform_addbook.addEventListener('submit', function (event) {\n    event.preventDefault()\n    text_bookname.setCustomValidity('')\n    text_bookauthor.setCustomValidity('')\n    select_genres.setCustomValidity('')\n    const errors = {}\n    const name = text_bookname.value.trim()\n    if (name.length === 0) {\n        errors.text_bookname = ['empty']\n    }\n    const author = text_bookauthor.value.trim()\n    if (author.length === 0) {\n        errors.text_bookauthor = ['empty']\n    }\n    const genres = select_genres.selectedOptions\n    if (genres.length === 0) {\n        errors.select_genres = ['empty']\n    }\n    const rating = parseInt(range_rating.value)\n    const url = text_url.value.trim()\n\n    if (Object.keys(errors).length !== 0) {\n        if (errors.text_bookname)\n            text_bookname.setCustomValidity('Name cannot be empty')\n        if (errors.text_bookauthor)\n            text_bookauthor.setCustomValidity('Author cannot be empty')\n        if (errors.select_genres)\n            select_genres.setCustomValidity('Must select at least one genre')\n        return\n    }\n\n\n});\n\n\n\n\nconst book = {\n    name: '',\n    author: '',\n    genres: [''],\n    rating: 10,\n    url: ''\n}"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$6AR8M","$cOa8X","$ilpIi","$388b617130f03bd4$var$formatRating","element","rating","parsedRating","Math","min","max","innerHTML","i","p","document","createElement","textContent","appendChild","auth","onAuthStateChanged","user","window","location","$388b617130f03bd4$var$btn_logout","getElementById","addEventListener","event","signOut","$388b617130f03bd4$var$form_addbook","$388b617130f03bd4$var$text_bookname","$388b617130f03bd4$var$text_bookauthor","$388b617130f03bd4$var$select_genres","$388b617130f03bd4$var$div_rating","$388b617130f03bd4$var$range_rating","$388b617130f03bd4$var$text_url","getDoc","doc","db","then","snapshot","genres","get","genre","console","log","option","value","label","catch","parseInt","preventDefault","setCustomValidity","errors","name","trim","length","text_bookname","author","text_bookauthor","selectedOptions","select_genres","Object","keys"],"version":3,"file":"app.db93cb87.js.map"}